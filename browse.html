<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Browse Clothes - ReWear</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:400,700|Lato:400,700|Roboto:400,700|Montserrat:400,600|Caveat:400,600|Lora:400,500&display=swap"
      rel="stylesheet"
    />
    <style>
      body.gradient-bg {
        font-family: "Poppins", "Lato", "Roboto", sans-serif !important;
      }
      .header h1 {
        font-family: "Poppins", "Lato", "Roboto", sans-serif !important;
        font-size: 2.4rem;
        font-weight: 800;
        color: #b3541e;
        background: linear-gradient(90deg, #ff9800 30%, #b3541e 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 8px #ffe0b2;
        letter-spacing: 0.01em;
        text-align: center;
        border-bottom: 2.5px solid #ffb74d;
        display: inline-block;
        padding-bottom: 0.3rem;
      }
      @media (max-width: 700px) {
        .back-home {
          margin-right: 0.7rem;
        }
      }
    </style>
  </head>
  <body class="gradient-bg">
    <div class="bg-texture"></div>
    <nav class="navbar">
      <div class="nav-left">
        <ul class="nav-links">
          <li><a href="index.html" class="nav-btn home-btn">Home</a></li>
          <li>
            <a href="donate.html" class="nav-btn donate-nav-btn">Donate</a>
          </li>
          <li>
            <a href="browse.html" class="nav-btn browse-nav-btn">Browse</a>
          </li>
          <li>
            <a href="profile.html" class="nav-btn profile-nav-btn">Profile</a>
          </li>
          <li>
            <a href="messages.html" class="nav-btn messages-nav-btn"
              >Messages</a
            >
          </li>
          <li>
            <a href="impact.html" class="nav-btn impact-nav-btn"
              >Impact Board</a
            >
          </li>
          <li>
            <a href="events.html" class="nav-btn events-nav-btn">Events</a>
          </li>
        </ul>
      </div>
      <div class="nav-right">
        <a href="#" id="logoutBtn" class="nav-btn logout-nav-btn">Logout</a>
      </div>
    </nav>
    <main>
      <form id="filterBar" class="filter-bar">
        <label
          >Cloth Name
          <input type="text" id="filterName" placeholder="Search name"
        /></label>
        <label
          >Category
          <select id="filterCategory">
            <option value="">All</option>
            <option>Male</option>
            <option>Female</option>
            <option>Kids</option>
            <option>Others</option>
          </select>
        </label>
        <label
          >Size
          <select id="filterSize">
            <option value="">All</option>
            <option>S</option>
            <option>M</option>
            <option>L</option>
            <option>XL</option>
            <option>XXL</option>
          </select>
        </label>
        <label
          >Condition
          <select id="filterCondition">
            <option value="">All</option>
            <option>Excellent (Freshly Washed, Almost New)</option>
            <option>Good (Gently Used, No Damage)</option>
            <option>Usable (Minor Fading or Shrink)</option>
            <option>Repairable (Needs Stitching or Small Fix)</option>
            <option>Vintage (Old but Classic)</option>
          </select>
        </label>
        <label
          >Location
          <input type="text" id="filterLocation" placeholder="City or area"
        /></label>
      </form>
      <section id="clothesGrid" class="clothes-grid"></section>
      <div id="modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <div id="modalDetails"></div>
        </div>
      </div>
    </main>
    <footer class="footer">
      <p>&copy; 2024 ReWear. All rights reserved.</p>
    </footer>
    <script src="js/browse.js"></script>
    <script>
      // Add condition badges to cards if not already present (for UI only)
      document.addEventListener("DOMContentLoaded", function () {
        const observer = new MutationObserver(() => {
          document.querySelectorAll(".cloth-card").forEach((card) => {
            const info = card.querySelector(".cloth-info");
            if (!info) return;
            // Find or create badge
            let badge = info.querySelector(".condition-badge");
            let cond = "";
            info.childNodes.forEach((n) => {
              if (
                n.nodeType === 3 &&
                n.textContent.match(
                  /(Excellent|Good|Usable|Repairable|Vintage)/i
                )
              ) {
                cond = n.textContent.trim();
              }
            });
            if (cond && !badge) {
              badge = document.createElement("span");
              badge.className = "condition-badge";
              badge.setAttribute("data-cond", cond);
              badge.textContent = cond;
              info.appendChild(badge);
            }
          });
        });
        observer.observe(document.getElementById("clothesGrid"), {
          childList: true,
          subtree: true,
        });
      });
      document.addEventListener("DOMContentLoaded", function () {
        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", function () {
            localStorage.clear();
            sessionStorage.clear();
            window.location.href = "login.html";
          });
        }
      });
    </script>
  </body>
</html>
